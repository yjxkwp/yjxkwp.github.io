webpackJsonp([1],{"+Gm5":function(e,t){},0:function(e,t){},"5Cvn":function(e,t){},"7gIH":function(e,t){},CmKa:function(e,t){},FOjQ:function(e,t){},HXXT:function(e,t){},"J/+Y":function(e,t){},JuQ1:function(e,t){},KhpF:function(e,t){},"L/Hl":function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view",{key:this.$route.fullPath})],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App"},n,!1,function(e){i("XewL")},null,null).exports,s=i("zL8q"),r=i.n(s),l=(i("tvR6"),i("/ocq")),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-tooltip",{attrs:{effect:"dark",content:this.prompt,placement:"bottom"}},[t("input",{staticClass:"icon",attrs:{type:"image",src:this.m_image,alt:""},on:{mouseover:this.onMouseOver,mouseout:this.onMouseOut,click:this.onclick}})])},staticRenderFns:[]};var d={name:"MenuBar",components:{MenuItemButton:i("VU/8")({name:"image-button",props:["prompt","normalImage","activeImage","onclick"],data:function(){return{m_image:this.normalImage}},methods:{onMouseOver:function(e){this.m_image=this.activeImage},onMouseOut:function(e){this.m_image=this.normalImage}}},c,!1,function(e){i("Ttho")},"data-v-3671dc96",null).exports},data:function(){return{uploadDialogVisible:!1,menuItems:[{prompt:"打开",normalImage:"static/images/icons/icon_open_normal.png",activeImage:"static/images/icons/icon_open_deleted.png",func:this.upload_file},{prompt:"保存",normalImage:"static/images/icons/icon_save_normal.png",activeImage:"static/images/icons/icon_save_deleted.png",func:this.empty},{prompt:"导出",normalImage:"static/images/icons/icon_export_normal.png",activeImage:"static/images/icons/icon_export_deleted.png",func:this.empty},{prompt:"撤销",normalImage:"static/images/icons/icon_undo_normal.png",activeImage:"static/images/icons/icon_undo_deleted.png",func:this.empty},{prompt:"重做",normalImage:"static/images/icons/icon_redo_normal.png",activeImage:"static/images/icons/icon_redo_deleted.png",func:this.empty}]}},methods:{upload_file:function(){this.uploadDialogVisible=!0},empty:function(){alert("empty")},onUploadError:function(e){this.$message.error("上传文件出错"),console.error(e)}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"menu-bar"},[i("el-dialog",{attrs:{title:"上传模型",visible:e.uploadDialogVisible,width:"30%",center:"","modal-append-to-body":!1},on:{"update:visible":function(t){e.uploadDialogVisible=t}}},[i("el-upload",{attrs:{drag:"",accept:"stl",name:"model","on-error":e.onUploadError,multiple:!1,action:e.GLOBAL.MODELS_LIST_URL}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传stl文件")])]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.uploadDialogVisible=!1,e.location.reload()}}},[e._v("完成")])],1)],1),e._v(" "),i("img",{staticClass:"menu-bar-icon",staticStyle:{"background-color":"orange"},attrs:{type:"image",src:"static/logo.png",alt:""}}),e._v(" "),e._l(e.menuItems,function(e){return i("menu-item-button",{key:e.prompt,attrs:{prompt:e.prompt,"active-image":e.activeImage,"normal-image":e.normalImage,onclick:e.func}})})],2)},staticRenderFns:[]};var u=i("VU/8")(d,m,!1,function(e){i("KhpF")},"data-v-4637d7fc",null).exports,h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-tooltip",{attrs:{effect:"dark",content:this.prompt,placement:"bottom"}},[t("input",{staticClass:"icon",attrs:{type:"image",src:this.m_image,alt:""},on:{mouseover:this.onMouseOver,mouseout:this.onMouseOut}})])},staticRenderFns:[]};var f={name:"ToolBar",components:{ToolItemButton:i("VU/8")({name:"ToolItemButton",props:["prompt","normalImage","activeImage"],data:function(){return{m_image:this.normalImage}},methods:{onMouseOver:function(e){this.m_image=this.activeImage},onMouseOut:function(e){this.m_image=this.normalImage}}},h,!1,function(e){i("CmKa")},"data-v-56e9f43c",null).exports},data:function(){return{activeName:"file",toolBarItems:[{label:"文件",name:"file",tools:[{prompt:"打开",activeImage:"/static/images/icons/icon_open_normal.png",normalImage:"/static/images/icons/icon_open_deleted.png"}]},{label:"编辑",name:"edit",tools:[]},{label:"视图",name:"view",tools:[]},{label:"纹理",name:"texture",tools:[]},{label:"晶格",name:"lattice",tools:[]},{label:"性能分析",name:"performance-analysis",tools:[]},{label:"性能优化",name:"performance-optimization",tools:[]},{label:"渲染",name:"rendering",tools:[]}]}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tool-bar"},[i("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.toolBarItems,function(e){return i("el-tab-pane",{key:e.label,attrs:{label:e.label,name:e.name}})}),1)],1)},staticRenderFns:[]};var v=i("VU/8")(f,p,!1,function(e){i("JuQ1"),i("HXXT")},"data-v-0b6544ca",null).exports,g=i("mvHQ"),_=i.n(g),b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("h5",{staticClass:"setting-header"},[this._v("三角形面网格")]),this._v(" "),t("el-link",{staticClass:"show-model-link",attrs:{type:"primary"},on:{click:this.showModel}},[this._v("显示模型")])],1)},staticRenderFns:[]};var y=i("VU/8")({name:"ConfigTriangularMesh",methods:{showModel:function(){this.$EventBus.$emit("model",{action:"load",model:"triangle"})}}},b,!1,function(e){i("i5se")},"data-v-9f0f93c2",null).exports,w={name:"ConfigTetrahedralMesh",props:["defaultForm","model"],data:function(){return{form:JSON.parse(_()(this.defaultForm))}},methods:{showModel:function(){this.$EventBus.$emit("model",{action:"load",model:"tetrahedron"})}}},x={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("h5",{staticClass:"setting-header"},[e._v("四面体网格")]),e._v(" "),i("el-link",{staticClass:"show-model-link",staticStyle:{visibility:"hidden"},attrs:{type:"primary",disabled:e.model.processing},on:{click:e.showModel}},[e._v("显示模型")])],1),e._v(" "),i("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"80px",disabled:e.model.processing}},[i("el-form-item",{attrs:{label:"目标顶点"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.target_vertex,callback:function(t){e.$set(e.form,"target_vertex",t)},expression:"form.target_vertex"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right",display:"none"}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left",size:"mini",round:""}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-upload",size:"mini",round:""}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"mini",round:""}},[e._v("应用")])],1)],1)},staticRenderFns:[]};var C=i("VU/8")(w,x,!1,function(e){i("J/+Y")},"data-v-57406157",null).exports,k={name:"ConfigTetrahedralPolycube",props:["defaultForm","model"],data:function(){return{form:JSON.parse(_()(this.defaultForm))}},methods:{showModel:function(){this.$EventBus.$emit("model",{action:"load",model:"tet-polycube"})}}},S={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("h5",{staticClass:"setting-header"},[e._v("四面体Polycube")]),e._v(" "),i("el-link",{staticClass:"show-model-link",staticStyle:{visibility:"hidden"},attrs:{type:"primary",disabled:e.model.processing},on:{click:e.showModel}},[e._v("显示模型")])],1),e._v(" "),i("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"80px",disabled:e.model.processing}},[i("el-form-item",{attrs:{label:"alpha"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number"},model:{value:e.form.alpha,callback:function(t){e.$set(e.form,"alpha",t)},expression:"form.alpha"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"beta"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number"},model:{value:e.form.beta,callback:function(t){e.$set(e.form,"beta",t)},expression:"form.beta"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"eq_tol"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number"},model:{value:e.form.eq_tol,callback:function(t){e.$set(e.form,"eq_tol",t)},expression:"form.eq_tol"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"eps"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number"},model:{value:e.form.eps,callback:function(t){e.$set(e.form,"eps",t)},expression:"form.eps"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"首次迭代"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.start_iter,callback:function(t){e.$set(e.form,"start_iter",t)},expression:"form.start_iter"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最大迭代"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.max_iter,callback:function(t){e.$set(e.form,"max_iter",t)},expression:"form.max_iter"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"每步放缩"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number"},model:{value:e.form.iter_step_scal,callback:function(t){e.$set(e.form,"iter_step_scal",t)},expression:"form.iter_step_scal"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"全局循环"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.global_iter,callback:function(t){e.$set(e.form,"global_iter",t)},expression:"form.global_iter"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"边缘平滑"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.TetCubePerfector.smooth_boundary,callback:function(t){e.$set(e.form.TetCubePerfector,"smooth_boundary",t)},expression:"form.TetCubePerfector.smooth_boundary"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"表面平滑"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.TetCubePerfector.smooth_surface,callback:function(t){e.$set(e.form.TetCubePerfector,"smooth_surface",t)},expression:"form.TetCubePerfector.smooth_surface"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"体平滑"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.TetCubePerfector.smooth_volume,callback:function(t){e.$set(e.form.TetCubePerfector,"smooth_volume",t)},expression:"form.TetCubePerfector.smooth_volume"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right",display:"none"}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left",size:"mini",round:""}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-upload",size:"mini",round:""}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"mini",round:""}},[e._v("应用")])],1)],1)},staticRenderFns:[]};var M=i("VU/8")(k,S,!1,function(e){i("irT2")},"data-v-371311b4",null).exports,P={name:"ConfigHexahedralPolycube",props:["defaultForm","model"],data:function(){return{form:JSON.parse(_()(this.defaultForm))}},methods:{showModel:function(){this.$EventBus.$emit("model",{action:"load",model:"hex-polycube"})}}},$={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("h5",{staticClass:"setting-header"},[e._v("六面体Polycube")]),e._v(" "),i("el-link",{staticClass:"show-model-link",staticStyle:{visibility:"hidden"},attrs:{type:"primary",disabled:e.model.processing},on:{click:e.showModel}},[e._v("显示模型")])],1),e._v(" "),i("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"80px",disabled:e.model.processing}},[i("el-form-item",{attrs:{label:"X轴放缩"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number"},model:{value:e.form.scaling_X,callback:function(t){e.$set(e.form,"scaling_X",t)},expression:"form.scaling_X"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Y轴放缩"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number"},model:{value:e.form.scaling_Y,callback:function(t){e.$set(e.form,"scaling_Y",t)},expression:"form.scaling_Y"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Z轴放缩"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number"},model:{value:e.form.scaling_Z,callback:function(t){e.$set(e.form,"scaling_Z",t)},expression:"form.scaling_Z"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"边缘平滑"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.HexCubePerfector.smooth_boundary,callback:function(t){e.$set(e.form.HexCubePerfector,"smooth_boundary",t)},expression:"form.HexCubePerfector.smooth_boundary"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"表面平滑"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.HexCubePerfector.smooth_surface,callback:function(t){e.$set(e.form.HexCubePerfector,"smooth_surface",t)},expression:"form.HexCubePerfector.smooth_surface"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"体平滑"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.HexCubePerfector.smooth_volume,callback:function(t){e.$set(e.form.HexCubePerfector,"smooth_volume",t)},expression:"form.HexCubePerfector.smooth_volume"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Pillowing X"}},[i("el-radio",{staticClass:"setting-input",attrs:{label:!0},model:{value:e.form.Pillowing.X,callback:function(t){e.$set(e.form.Pillowing,"X",t)},expression:"form.Pillowing.X"}},[e._v("打开")]),e._v(" "),i("el-radio",{staticClass:"setting-input",attrs:{label:!1},model:{value:e.form.Pillowing.X,callback:function(t){e.$set(e.form.Pillowing,"X",t)},expression:"form.Pillowing.X"}},[e._v("关闭")])],1),e._v(" "),i("el-form-item",{attrs:{label:"Pillowing Y"}},[i("el-radio",{staticClass:"setting-input",attrs:{label:!0},model:{value:e.form.Pillowing.Y,callback:function(t){e.$set(e.form.Pillowing,"Y",t)},expression:"form.Pillowing.Y"}},[e._v("打开")]),e._v(" "),i("el-radio",{staticClass:"setting-input",attrs:{label:!1},model:{value:e.form.Pillowing.Y,callback:function(t){e.$set(e.form.Pillowing,"Y",t)},expression:"form.Pillowing.Y"}},[e._v("关闭")])],1),e._v(" "),i("el-form-item",{attrs:{label:"Pillowing Z"}},[i("el-radio",{staticClass:"setting-input",attrs:{label:!0},model:{value:e.form.Pillowing.Z,callback:function(t){e.$set(e.form.Pillowing,"Z",t)},expression:"form.Pillowing.Z"}},[e._v("打开")]),e._v(" "),i("el-radio",{staticClass:"setting-input",attrs:{label:!1},model:{value:e.form.Pillowing.Z,callback:function(t){e.$set(e.form.Pillowing,"Z",t)},expression:"form.Pillowing.Z"}},[e._v("关闭")])],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right",display:"none"}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left",size:"mini",round:""}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-upload",size:"mini",round:""}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"mini",round:""}},[e._v("应用")])],1)],1)},staticRenderFns:[]};var z=i("VU/8")(P,$,!1,function(e){i("ZqaU")},"data-v-f1bfd7b0",null).exports,L={name:"ConfigHexahedralMesh",props:["defaultForm","model"],data:function(){return{form:JSON.parse(_()(this.defaultForm))}},methods:{showModel:function(){this.$EventBus.$emit("model",{action:"load",model:"hex"})}}},B={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("h5",{staticClass:"setting-header"},[e._v("六面体模型")]),e._v(" "),i("el-link",{staticClass:"show-model-link",staticStyle:{visibility:"hidden"},attrs:{type:"primary",disabled:e.model.processing},on:{click:e.showModel}},[e._v("显示模型")])],1),e._v(" "),i("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"80px",disabled:e.model.processing}},[i("el-form-item",{attrs:{label:"边缘平滑"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.HexPerfector.smooth_boundary,callback:function(t){e.$set(e.form.HexPerfector,"smooth_boundary",t)},expression:"form.HexPerfector.smooth_boundary"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"表面平滑"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.HexPerfector.smooth_surface,callback:function(t){e.$set(e.form.HexPerfector,"smooth_surface",t)},expression:"form.HexPerfector.smooth_surface"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"体平滑"}},[i("el-input",{staticClass:"setting-input",attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.HexPerfector.smooth_volume,callback:function(t){e.$set(e.form.HexPerfector,"smooth_volume",t)},expression:"form.HexPerfector.smooth_volume"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right",display:"none"}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left",size:"mini",round:""}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-upload",size:"mini",round:""}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"mini",round:""}},[e._v("应用")])],1)],1)},staticRenderFns:[]};var E=i("VU/8")(L,B,!1,function(e){i("FOjQ")},"data-v-29b1cb3b",null).exports,F={name:"ConfigPorousModel",props:["defaultForm","model"],data:function(){return{form:JSON.parse(_()(this.defaultForm))}},methods:{showModel:function(){this.$EventBus.$emit("model",{action:"load",model:"porous"})}}},R={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("h5",{staticClass:"setting-header"},[e._v("多孔模型")]),e._v(" "),i("el-link",{staticClass:"show-model-link",attrs:{type:"primary",disabled:e.model.processing||e.model.status<5},on:{click:e.showModel}},[e._v("显示模型")])],1),e._v(" "),i("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"80px",disabled:e.model.processing}},[i("el-form-item",{attrs:{label:"半径"}},[i("el-input",{attrs:{type:"number"},model:{value:e.form.radii,callback:function(t){e.$set(e.form,"radii",t)},expression:"form.radii"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"数量"}},[i("el-input",{attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.num_eles,callback:function(t){e.$set(e.form,"num_eles",t)},expression:"form.num_eles"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"分辨率"}},[i("el-input",{attrs:{type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode || event.which))) || event.which === 8"},model:{value:e.form.resolution,callback:function(t){e.$set(e.form,"resolution",t)},expression:"form.resolution"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right",display:"none"}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left",size:"mini",round:""}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-upload",size:"mini",round:""}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"mini",round:""}},[e._v("应用")])],1)],1)},staticRenderFns:[]};var H=i("VU/8")(F,R,!1,function(e){i("iv08")},"data-v-7b42dc3e",null).exports,I={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._m(0),e._v(" "),i("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"80px"}},[i("el-form-item",{attrs:{label:"仿真方法"}},[i("el-radio",{staticClass:"setting-input",attrs:{label:"1"},model:{value:e.sim,callback:function(t){e.sim=t},expression:"sim"}},[e._v("GPU+MGCG")]),e._v(" "),i("el-radio",{staticClass:"setting-input",attrs:{label:"2"},model:{value:e.sim,callback:function(t){e.sim=t},expression:"sim"}},[e._v("均一化仿真")]),e._v(" "),i("el-radio",{staticClass:"setting-input",attrs:{label:"3"},model:{value:e.sim,callback:function(t){e.sim=t},expression:"sim"}},[e._v("BNBS线性仿真")]),e._v(" "),i("el-radio",{staticClass:"setting-input",attrs:{label:"4"},model:{value:e.sim,callback:function(t){e.sim=t},expression:"sim"}},[e._v("BNBS非线性仿真")])],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right",display:"none"}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left",size:"mini",round:""}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-upload",size:"mini",round:""}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"mini",round:""}},[e._v("应用")])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("h5",{staticClass:"setting-header"},[this._v("仿真模型")])])}]};var T=i("VU/8")({name:"ConfigSimulation",data:function(){return{sim:"1"}},methods:{showModel:function(){this.$EventBus.$emit("model",{action:"load",model:"porous"})}}},I,!1,function(e){i("Y4Wn")},"data-v-242c98fb",null).exports,U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("h5",{staticClass:"setting-header"},[this._v("优化模型")]),this._v(" "),t("el-link",{staticClass:"show-model-link",attrs:{type:"primary"},on:{click:this.showModel}},[this._v("显示模型")])],1)},staticRenderFns:[]};var V={name:"SettingPanel",components:{ConfigOptimizer:i("VU/8")({name:"ConfigOptimizer",methods:{showModel:function(){this.$EventBus.$emit("model",{action:"load",model:"optimizer"})}}},U,!1,function(e){i("hOEG")},"data-v-3b17ac10",null).exports,ConfigSimulation:T,ConfigPorousModel:H,ConfigHexahedralMesh:E,ConfigHexahedralPolycube:z,ConfigTetrahedralPolycube:M,ConfigTetrahedralMesh:C,ConfigTriangularMesh:y},data:function(){return{active_id:null,loading:!1,file:{},data:{},form:null,defaultForm:null}},mounted:function(){this.form=JSON.parse(_()(this.defaultForm)),this.active_id=this.$route.params.id,null!==this.active_id&&void 0!==this.active_id&&this.loadData()},methods:{loadData:function(){var e=this;this.defaultForm=null,this.form=null,this.loading=!0,this.axios.get(this.GLOBAL.MODEL_ITEM_URL(this.active_id)).then(function(t){var i=t.data;if(200!==i.status)return e.$message.error("错误："+i.msg),void(e.loading=!1);e.file=i.data,e.axios.get(e.GLOBAL.MODEL_CONFIG_URL(e.active_id)).then(function(t){var i=t.data;if(200!==i.status)return e.$message.error("错误："+i.msg),void(e.loading=!1);e.defaultForm=i.data,e.form=JSON.parse(_()(e.defaultForm)),e.loading=!1}).catch(function(t){e.$message.error("文件配置加载异常："+t),e.loading=!1})}).catch(function(t){e.$message.error("文件属性加载异常："+t),e.loading=!1})},clearModel:function(){this.$EventBus.$emit("model",{action:"clear"})},saveParams:function(e){var t=this;this.loading=!0;var i={TetGeneration:this.$refs.TetGeneration.form,TetPolycube:this.$refs.TetPolycube.form,HexPolycube:this.$refs.HexPolycube.form,HexGeneration:this.$refs.HexGeneration.form,Porous:this.$refs.Porous.form};this.axios.post(this.GLOBAL.MODEL_CONFIG_URL(this.active_id),i).then(function(i){var a=i.data;if(200!==a.status)return t.$message.error("错误："+a.msg),void(t.loading=!1);t.$message.success("参数提交成功"),e&&"function"==typeof e&&e(),t.loading=!1}).catch(function(e){t.$message.error("参数提交异常: "+e),t.loading=!1})},applyTask:function(){var e=this;this.loading=!1,this.axios.post(this.GLOBAL.MODEL_TASK_URL(this.active_id)).then(function(t){var i=t.data;200!==i.status?e.$message.error("错误："+i.msg):e.$message.success("任务成功执行，请耐心等待..."),e.loading=!1,location.reload()}).catch(function(t){e.$message.error("参数提交异常: "+t),e.loading=!1})}}},O={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!==e.active_id&&void 0!==e.active_id?i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Loading","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("div",{staticClass:"panel-side-name",staticStyle:{"font-size":"16px",display:"flex","justify-content":"space-between"}},[i("strong",[e._v(e._s(e.file.name))]),e._v(" "),i("div",[i("el-link",{staticClass:"clear-model-link",attrs:{type:"primary"},on:{click:e.loadData}},[e._v("刷新")]),e._v(" "),i("el-link",{staticClass:"clear-model-link",attrs:{type:"danger"},on:{click:e.clearModel}},[e._v("清除模型")])],1)]),e._v(" "),null!==e.form?i("div",{staticClass:"setting-panel"},[i("config-triangular-mesh",{staticClass:"setting-part"}),e._v(" "),i("el-divider"),e._v(" "),i("config-tetrahedral-mesh",{ref:"TetGeneration",staticClass:"setting-part",attrs:{"default-form":e.form.TetGeneration,model:e.file}}),e._v(" "),i("el-divider"),e._v(" "),i("config-tetrahedral-polycube",{ref:"TetPolycube",staticClass:"setting-part",attrs:{"default-form":e.form.TetPolycube,model:e.file}}),e._v(" "),i("el-divider"),e._v(" "),i("config-hexahedral-polycube",{ref:"HexPolycube",staticClass:"setting-part",attrs:{"default-form":e.form.HexPolycube,model:e.file}}),e._v(" "),i("el-divider"),e._v(" "),i("config-hexahedral-mesh",{ref:"HexGeneration",staticClass:"setting-part",attrs:{"default-form":e.form.HexGeneration,model:e.file}}),e._v(" "),i("el-divider"),e._v(" "),i("config-porous-model",{ref:"Porous",staticClass:"setting-part",attrs:{"default-form":e.form.Porous,model:e.file}}),e._v(" "),i("el-divider"),e._v(" "),i("config-simulation",{ref:"Porous",staticClass:"setting-part"}),e._v(" "),i("el-divider"),e._v(" "),i("config-optimizer",{staticClass:"setting-part"})],1):e._e(),e._v(" "),i("el-divider"),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"success",icon:"el-icon-upload",size:"small",round:"",disabled:e.file.processing},on:{click:e.saveParams}},[e._v("全部保存")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"small",round:"",disabled:e.file.processing},on:{click:function(t){return e.saveParams(e.applyTask)}}},[e._v("全部应用")])],1),e._v(" "),e.file.processing?i("div",{staticStyle:{"text-align":"center","font-size":"12px",color:"#8c939d"}},[e._v("\n    模型任务执行中，无法再次进行修改\n  ")]):e._e(),e._v(" "),i("div",{staticStyle:{height:"5px"}})],1):i("div",{staticStyle:{width:"100%",height:"80%",display:"flex","flex-direction":"column","text-align":"center","justify-content":"center","align-items":"center"}},[e._m(0),e._v(" "),i("h4",{staticStyle:{"font-size":"16px",color:"#8c939d"}},[e._v("请在右侧选择文件")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("strong",{staticStyle:{"font-size":"40px",color:"#8c939d"}},[t("i",{staticClass:"el-icon-folder-opened"})])}]};var G=i("VU/8")(V,O,!1,function(e){i("lLnQ"),i("YBGF")},null,null).exports,N={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"100%",display:"flex","flex-direction":"column"},attrs:{"element-loading-text":"Loading","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("div",[i("h4",{staticClass:"attr-header"},[e._v("文件列表")]),e._v(" "),i("el-divider"),e._v(" "),0===e.fileList.length?i("div",{staticStyle:{"font-size":"14px","text-align":"center","margin-top":"30px"}},[e._v("\n        暂时没有数据，\n        "),i("el-link",{attrs:{type:"primary"},on:{click:e.loadingData}},[i("i",{staticClass:"el-icon-refresh"}),e._v("点击刷新")])],1):e._e(),e._v(" "),i("div",{staticClass:"file-list"},[e._l(e.fileList,function(t){return i("el-popover",{key:t.id,attrs:{placement:"left",width:"40",trigger:"hover"}},[i("div",{staticClass:"file-info"},[i("div",{staticStyle:{"font-size":"16px"}},[i("strong",[e._v(e._s(t.name))])]),e._v(" "),i("div",{staticStyle:{"font-size":"12px"}},[e._v(" "+e._s(new Date(t.created).format("yyyy/MM/dd hh:mm:ss")))]),e._v(" "),t.processing?i("div",{staticStyle:{color:"rgb(217, 94, 41)"}},[i("i",{staticClass:"el-icon-loading"}),e._v(" 生成多孔模型中\n")]):e._e(),e._v(" "),i("div",{staticStyle:{"text-align":"right"}},[i("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"danger"},on:{click:function(i){return e.deleteModel(t)}}},[e._v("删除模型")])],1)]),e._v(" "),i("div",{staticClass:"file-item-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("el-link",{class:"file-item "+(e.active_id+""==t.id+""?"active":""),attrs:{underline:!1},on:{click:function(i){return e.gotoNewPage(t.id)}}},[e._v("\n              "+e._s(t.name)+"\n              "),t.processing?i("i",{staticClass:"el-icon-loading",staticStyle:{color:"rgb(217, 94, 41)"}}):e._e()])],1)])}),e._v(" "),0!==e.fileList.length?i("div",{staticStyle:{"font-size":"14px","text-align":"center","margin-top":"15px"}},[i("el-link",{attrs:{type:"primary"},on:{click:e.loadingData}},[i("i",{staticClass:"el-icon-refresh"}),e._v("点击刷新")])],1):e._e()],2)],1)])},staticRenderFns:[]};var D=i("VU/8")({name:"AttributePanel",data:function(){return{active_id:null,loading:!1,fileList:[]}},mounted:function(){this.active_id=this.$route.params.id,this.loadingData()},methods:{loadingData:function(){var e=this;this.loading=!0,this.axios.get(this.GLOBAL.MODELS_LIST_URL).then(function(t){var i=t.data;200===i.status?(e.fileList=i.data,e.loading=!1):e.$message.error("错误："+i.msg)}).catch(function(t){e.$message.error("文件列表拉取连接异常："+t),e.loading=!1})},gotoNewPage:function(e){this.$router.replace({name:"Detail",params:{id:e}})},deleteModel:function(e){var t=this;this.$confirm('此操作将永久删除模型"'+e.name+'" , 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,t.axios.delete(t.GLOBAL.MODEL_ITEM_URL(e.id)).then(function(e){var i=e.data;200!==i.status?t.$message.error("删除失败: "+i.msg):t.$message.success("删除成功!"),t.loading=!1,t.loadingData()}).catch(function(e){t.$message.error("通讯异常："+e),t.loading=!1})})}}},N,!1,function(e){i("PG9j"),i("lXbF")},"data-v-f05bc7f8",null).exports,j=i("Gu7T"),A=i.n(j),W=i("Ml+6"),X=i("bz7y"),K=i.n(X),Y=i("0uQj")(W),q=i("qKrd")(W),Z=i("od15"),J={name:"Model",components:{VueDraggableResize:K.a},data:function(){return{active_id:null,loading:!1,camera:null,cameraTarget:null,scene:null,renderer:null,axisHelper:null,stats:null,mesh:null,objects:[],dummy:new W.Object3D}},computed:{statsPositionX:function(){return window.innerWidth-300-200-80-50}},mounted:function(){this.active_id=this.$route.params.id,null!==this.active_id&&void 0!==this.active_id&&(this.init(),this.createLights(),this.animate(),this.actionInit())},methods:{init:function(){var e=window.innerWidth-200-300,t=window.innerHeight-75,i=document.getElementById("model-area");this.camera=new W.PerspectiveCamera(35,e/t,.01,15e3),this.camera.position.set(3,.15,3),this.cameraTarget=new W.Vector3(0,-.25,0),this.scene=new W.Scene,this.scene.background=new W.Color(5396334),this.renderer=new W.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t),this.renderer.outputEncoding=W.sRGBEncoding,this.renderer.shadowMap.enabled=!0,i.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1),new q(this.camera,this.renderer.domElement).addEventListener("change",this.render),this.axisHelper=new W.AxisHelper(.15),this.scene.add(this.axisHelper),this.stats=new Z,this.stats.domElement.style.position="absolute",console.log(i),document.getElementById("model-stats").appendChild(this.stats.domElement)},make_center:function(e){for(var t=e.attributes.position.itemSize,i=e.attributes.position.count,a=Array(t).fill(0),n=0;n<i;++n)for(var o=0;o<t;++o)a[o]+=e.attributes.position.array[n*t+o];for(var s=0;s<t;++s)a[s]/=i;e.computeBoundingBox();for(var r=e.boundingBox.max.clone().sub(e.boundingBox.min.clone()),l=Math.max.apply(Math,[r.x,r.y,r.z]),c=0;c<i;++c)for(var d=0;d<t;++d)e.attributes.position.array[c*t+d]-=a[d],e.attributes.position.array[c*t+d]/=l;e.computeBoundingBox()},createLights:function(){this.scene.add(new W.AmbientLight(6316128)),this.addShadowedLight(-1,1,1,15658734,1),this.addShadowedLight(-.5,.5,-1,13421772,.5),this.addShadowedLight(1,.5,0,13421772,1)},addShadowedLight:function(e,t,i,a,n){var o=new W.DirectionalLight(a,n);o.position.set(e,t,i),this.scene.add(o),o.castShadow=!0;o.shadow.camera.left=-1,o.shadow.camera.right=1,o.shadow.camera.top=1,o.shadow.camera.bottom=-1,o.shadow.camera.near=1,o.shadow.camera.far=4,o.shadow.bias=-.002},clearModel:function(){var e=this;this.objects&&this.objects.forEach(function(t){t instanceof W.LOD?(t.children.forEach(function(e){e.geometry.dispose(),e.material.dispose()}),t.children.remove(0,-1)):t instanceof W.Mesh&&(t.geometry.dispose(),t.material.dispose());e.scene.children.indexOf(t);e.scene.children.removeElement(t)}),this.objects.remove(0,-1)},loadModel:function(e){var t=this;if(null!==this.active_id&&void 0!==this.active_id)if(this.clearModel(),"triangle"===e){this.loading=!0;var i="/resource/models/"+this.active_id+"/model.stl";(new Y).load(i,function(e){t.addObject(e,function(){t.loading=!1})})}else"porous"===e?(this.loading=!0,this.loadInstancedObject()):"optimizer"===e&&(this.loading=!0,this.loadInstancedObject())},loadInstancedObject:function(){var e=this;this.axios.get("/static/models/matrix_porous.json").then(function(t){e.objects=[];var i=new W.MeshPhysicalMaterial({color:7829367});t.data.rods.forEach(function(t,a){var n=t[0],o=t[1],s=o.length,r=new W.CylinderBufferGeometry(n,1,2,5,3);r.colorsNeedUpdate=!0,r.elementsNeedUpdate=!0,r.computeBoundingSphere();var l=new W.InstancedMesh(r,i,s);l.instanceMatrix.setUsage(W.StaticReadUsage),console.log(l),l.position.set(0,0,0),l.scale.set(2,2,2),l.castShadow=!0,l.receiveShadow=!0,e.scene.add(l);for(var c=0;c<s;c++){var d=new W.Matrix4;d.set.apply(d,A()(o[c])),l.setMatrixAt(c,d)}l.instanceMatrix.needsUpdate=!0,e.objects.push(l)});var a=t.data.balls,n=a.length,o=new W.SphereBufferGeometry(1,8,8);o.colorsNeedUpdate=!0,o.elementsNeedUpdate=!0,o.computeBoundingSphere(),e.ball_mesh=new W.InstancedMesh(o,i,n),e.ball_mesh.instanceMatrix.setUsage(W.StaticReadUsage),e.ball_mesh.position.set(0,0,0),e.ball_mesh.scale.set(2,2,2),e.ball_mesh.castShadow=!0,e.ball_mesh.receiveShadow=!0,e.objects.push(e.ball_mesh),e.scene.add(e.ball_mesh);for(var s=0;s<n;s++){var r=new W.Matrix4;r.set.apply(r,A()(a[s])),e.ball_mesh.setMatrixAt(s,r)}e.ball_mesh.instanceMatrix.needsUpdate=!0,e.loading=!1;var l=e.getGeometryByteLength(rod_geometry);e.$message(["Number of Geometry: "+String(rod_n_matrix),"GPU draw calls: 1","GPU memory: "+e.formatBytes(16*rod_n_matrix+l,2)].join("\n"))})},addObject:function(e,t){this.make_center(e),e=(new W.Geometry).fromBufferGeometry(e);var i=new W.MeshPhongMaterial({color:7829367,specular:0,shininess:20}),a=new W.Mesh(e,i);a.position.set(0,0,0),a.rotation.set(0,-Math.PI/2,0),a.scale.set(2,2,2),a.castShadow=!0,a.receiveShadow=!0,this.scene.add(a),this.objects.push(a),t&&"function"==typeof t&&t()},render:function(){this.camera.lookAt(this.cameraTarget),this.camera.updateMatrixWorld();var e=this.camera.localToWorld(new W.Vector3(.45*this.camera.aspect,-.4,-2));this.axisHelper.position.copy(e),this.renderer.render(this.scene,this.camera)},onWindowResize:function(){var e=window.innerWidth-200-300,t=window.innerHeight-75;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},actionInit:function(){var e=this;this.$EventBus.$on("model",function(t){switch(t.action){case"reset":e.camera.position.set(3,.15,3),e.cameraTarget=new W.Vector3(0,-.25,0),e.$message({message:"复位成功",type:"success"});break;case"load":e.loadModel(t.model),e.$message({message:"收到模型加载信息 "+t.model,type:"success"});break;case"clear":e.clearModel(),e.$message({message:"模型清除成功",type:"success"});break;default:e.$message({message:"收到未定义的事件: "+t.action,type:"warning"})}})},getGeometryByteLength:function(e){var t=0;for(var i in e.index&&(t+=e.index.array.byteLength),e.attributes)t+=e.attributes[i].array.byteLength;return t},formatBytes:function(e,t){if(0===e)return"0 bytes";var i=t<0?0:t,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(i))+" "+["bytes","KB","MB"][a]}}},Q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],attrs:{id:"model-area","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("VueDraggableResize",{attrs:{id:"model-stats",w:80,h:48,y:80,x:this.statsPositionX,"handle-info":{size:0,offset:0,switch:!0},isResizable:!1}})],1)},staticRenderFns:[]};var ee={name:"HomePage",components:{Model:i("VU/8")(J,Q,!1,function(e){i("WTfM")},"data-v-6d16d9f5",null).exports,AttributePanel:D,SettingPanel:G,ToolBar:v,MenuBar:u},data:function(){return{}}},te={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"100%",overflow:"hidden"}},[t("div",{staticStyle:{width:"100%",overflow:"hidden"}},[t("menu-bar"),this._v(" "),t("tool-bar")],1),this._v(" "),t("div",{staticStyle:{height:"100%"}},[t("div",{staticClass:"column",staticStyle:{width:"300px",left:"0"}},[t("setting-panel",{staticStyle:{width:"100%","margin-bottom":"75px"}})],1),this._v(" "),t("div",{staticClass:"column",staticStyle:{left:"300px",right:"200px","background-color":"#8c939d"}},[t("model")],1),this._v(" "),t("div",{staticClass:"column",staticStyle:{width:"200px",right:"0"}},[t("attribute-panel",{staticStyle:{width:"100%"}})],1)])])},staticRenderFns:[]};var ie=i("VU/8")(ee,te,!1,function(e){i("L/Hl"),i("vvkt")},"data-v-04267740",null).exports,ae=i("mtWM"),ne=i.n(ae),oe=i("0uQj")(W),se=i("qKrd")(W),re=i("od15"),le={name:"Model",components:{VueDraggableResize:K.a},data:function(){return{loading:!0,camera:null,cameraTarget:null,scene:null,renderer:null,axisHelper:null,stats:null,mesh:null,dummy:new W.Object3D}},computed:{statsPositionX:function(){return window.innerWidth-80-20}},mounted:function(){this.init();var e=function(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var a=t[i].split("=");if(a[0]===e)return a[1]}}("model");console.log(e),"stl"===e?this.loadStlObject():this.loadInstancedObject(),this.createLights(),this.animate(),this.actionInit()},methods:{init:function(){var e=window.innerHeight,t=window.innerWidth,i=document.getElementById("model-area");this.camera=new W.PerspectiveCamera(35,t/e,.01,15e3),this.camera.position.set(3,.15,3),this.cameraTarget=new W.Vector3(0,-.25,0),this.scene=new W.Scene,this.scene.background=new W.Color(5592405),this.renderer=new W.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(t,e),this.renderer.outputEncoding=W.sRGBEncoding,this.renderer.shadowMap.enabled=!0,i.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1),new se(this.camera,this.renderer.domElement).addEventListener("change",this.render),this.axisHelper=new W.AxisHelper(.15),this.scene.add(this.axisHelper),this.stats=new re,this.stats.domElement.style.position="absolute",console.log(i),document.getElementById("model-stats").appendChild(this.stats.domElement)},make_center:function(e){for(var t=e.attributes.position.itemSize,i=e.attributes.position.count,a=Array(t).fill(0),n=0;n<i;++n)for(var o=0;o<t;++o)a[o]+=e.attributes.position.array[n*t+o];for(var s=0;s<t;++s)a[s]/=i;e.computeBoundingBox();for(var r=e.boundingBox.max.clone().sub(e.boundingBox.min.clone()),l=Math.max.apply(Math,[r.x,r.y,r.z]),c=0;c<i;++c)for(var d=0;d<t;++d)e.attributes.position.array[c*t+d]-=a[d],e.attributes.position.array[c*t+d]/=l;e.computeBoundingBox()},loadStlObject:function(){var e=this;(new oe).load("./static/models/porous.stl",function(t){e.make_center(t),console.log(t),t=(new W.Geometry).fromBufferGeometry(t);var i=new W.MeshPhongMaterial({color:7829367,specular:0,shininess:20}),a=new W.Mesh(t,i);a.position.set(0,0,0),a.rotation.set(0,-Math.PI/2,0),a.scale.set(2,2,2),a.castShadow=!0,a.receiveShadow=!0,console.log(a),e.scene.add(a),e.loading=!1})},loadInstancedObject:function(){var e=this;this.axios.get("/static/models/matrix4.json").then(function(t){e.rod_meshes=[];var i=new W.MeshPhysicalMaterial({color:7829367});t.data.rods.forEach(function(t,a){var n=t[0],o=t[1],s=o.length,r=new W.CylinderBufferGeometry(n,1,2,5,3);r.colorsNeedUpdate=!0,r.elementsNeedUpdate=!0,r.computeBoundingSphere();var l=new W.InstancedMesh(r,i,s);l.instanceMatrix.setUsage(W.StaticReadUsage),console.log(l),l.position.set(0,0,0),l.scale.set(2,2,2),l.castShadow=!0,l.receiveShadow=!0,e.scene.add(l);for(var c=0;c<s;c++){var d=new W.Matrix4;d.set.apply(d,A()(o[c])),l.setMatrixAt(c,d)}l.instanceMatrix.needsUpdate=!0,e.rod_meshes.push(l)});var a=t.data.balls,n=a.length,o=new W.SphereBufferGeometry(1,8,8);o.colorsNeedUpdate=!0,o.elementsNeedUpdate=!0,o.computeBoundingSphere(),e.ball_mesh=new W.InstancedMesh(o,i,n),e.ball_mesh.instanceMatrix.setUsage(W.StaticReadUsage),e.ball_mesh.position.set(0,0,0),e.ball_mesh.scale.set(2,2,2),e.ball_mesh.castShadow=!0,e.ball_mesh.receiveShadow=!0,e.scene.add(e.ball_mesh);for(var s=0;s<n;s++){var r=new W.Matrix4;r.set.apply(r,A()(a[s])),e.ball_mesh.setMatrixAt(s,r)}e.ball_mesh.instanceMatrix.needsUpdate=!0,e.loading=!1;var l=e.getGeometryByteLength(rod_geometry);e.$message(["Number of Geometry: "+String(rod_n_matrix),"GPU draw calls: 1","GPU memory: "+e.formatBytes(16*rod_n_matrix+l,2)].join("\n"))})},loadInstancedColorExample:function(){var e=(new W.InstancedBufferGeometry).copy(new W.BoxBufferGeometry(10,10,10));e.addAttribute("cubePos",new W.InstancedBufferAttribute(new Float32Array([25,25,25,25,25,-25,-25,25,25,-25,25,-25,25,-25,25,25,-25,-25,-25,-25,25,-25,-25,-25]),3,1));var t=["precision highp float;","","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","","attribute vec3 position;","attribute vec3 cubePos;","","void main() {","","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( cubePos + position, 1.0 );","","}"].join("\n"),i=["precision highp float;","","void main() {","","\tgl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);","","}"].join("\n"),a=new W.RawShaderMaterial({uniforms:{},vertexShader:t,fragmentShader:i,side:W.DoubleSide,transparent:!1}),n=new W.Mesh(e,a);console.log(n),this.scene.add(n),this.loading=!1},createLights:function(){this.scene.add(new W.AmbientLight(6316128)),this.addShadowedLight(-1,1,1,15658734,1),this.addShadowedLight(-.5,.5,-1,13421772,.5),this.addShadowedLight(1,.5,0,13421772,1)},addShadowedLight:function(e,t,i,a,n){var o=new W.DirectionalLight(a,n);o.position.set(e,t,i),this.scene.add(o),o.castShadow=!0;o.shadow.camera.left=-1,o.shadow.camera.right=1,o.shadow.camera.top=1,o.shadow.camera.bottom=-1,o.shadow.camera.near=1,o.shadow.camera.far=4,o.shadow.bias=-.002},render:function(){this.camera.lookAt(this.cameraTarget),this.camera.updateMatrixWorld();var e=this.camera.localToWorld(new W.Vector3(.45*this.camera.aspect,-.4,-2));this.axisHelper.position.copy(e),this.renderer.render(this.scene,this.camera)},onWindowResize:function(){this.camera.aspect=window.innerWidth/(window.innerHeight-60),this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight-60)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},actionInit:function(){var e=this;this.$EventBus.$on("model",function(t){switch(t.action){case"reset":e.camera.position.set(3,.15,3),e.cameraTarget=new W.Vector3(0,-.25,0),e.$message({message:"复位成功",type:"success"});break;default:e.$message({message:"收到未定义的事件: "+t.action,type:"warning"})}})},getGeometryByteLength:function(e){var t=0;for(var i in e.index&&(t+=e.index.array.byteLength),e.attributes)t+=e.attributes[i].array.byteLength;return t},formatBytes:function(e,t){if(0===e)return"0 bytes";var i=t<0?0:t,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(i))+" "+["bytes","KB","MB"][a]}}},ce={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],attrs:{id:"model-area","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("VueDraggableResize",{attrs:{id:"model-stats",w:80,h:48,y:80,x:this.statsPositionX,"handle-info":{size:0,offset:0,switch:!0},isResizable:!1}}),this._v(" "),t("script",{attrs:{id:"vshader",type:"x-shader/x-vertex"}},[this._v("\n  precision highp float;\n  uniform mat4 modelViewMatrix;\n  uniform mat4 projectionMatrix;\n  uniform float time;\n\n  attribute vec3 position;\n  attribute vec3 translate;\n  attribute vec3 vertexColor;\n\n  varying vec3 vVertexColor;\n\n  void main() {\n      vec4 mvPosition = modelViewMatrix * vec4(translate, 1.0);\n      vec3 trTime = vec3(\n          translate.x + time,\n          translate.y + time,\n          translate.z + time\n      );\n      float scale = 1.0;\n      scale = scale * 10.0 + 10.0;\n      mvPosition.xyz += position * scale;\n      vVertexColor = vertexColor;\n      gl_Position = projectionMatrix * mvPosition;\n  }\n\n  ")]),this._v(" "),t("script",{attrs:{id:"fshader",type:"x-shader/x-fragment"}},[this._v("\n  precision highp float;\n  varying vec3 vVertexColor;\n\n  void main() {\n      gl_FragColor = vec4(vVertexColor, 1);\n  }\n\n  ")])],1)},staticRenderFns:[]};var de=i("VU/8")(le,ce,!1,function(e){i("+Gm5")},"data-v-03f67b56",null).exports,me={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#409EFF"},on:{select:e.handleSelect}},[i("el-menu-item",[i("el-avatar",{attrs:{size:"large",src:e.logoUrl}})],1),e._v(" "),i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[e._v("文件")]),e._v(" "),i("el-menu-item",{attrs:{index:"load"}},[e._v("加载")]),e._v(" "),i("el-menu-item",{attrs:{index:"save"}},[e._v("保存")]),e._v(" "),i("el-menu-item",{attrs:{index:"exit"}},[e._v("退出")])],2),e._v(" "),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[e._v("编辑")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-1"}},[e._v("选项1")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-2"}},[e._v("选项2")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-3"}},[e._v("选项3")])],2),e._v(" "),i("el-submenu",{attrs:{index:"3"}},[i("template",{slot:"title"},[e._v("视图")]),e._v(" "),i("el-menu-item",{attrs:{index:"reset"}},[e._v("复位")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-2"}},[e._v("选项2")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-3"}},[e._v("选项3")])],2),e._v(" "),i("el-submenu",{attrs:{index:"4"}},[i("template",{slot:"title"},[e._v("窗口")]),e._v(" "),i("el-menu-item",{attrs:{index:"toolSideBarVisibility"}},[e._v("\n            "+e._s(e.$store.state.componentVisibility.toolSideBar?"隐藏":"显示")+"侧边工具箱\n        ")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-2"}},[e._v("选项2")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-3"}},[e._v("选项3")])],2)],1)},staticRenderFns:[]};var ue=i("VU/8")({name:"HeaderBar",data:function(){return{logoUrl:"static/logo.png",activeIndex:"1"}},methods:{handleSelect:function(e,t){switch(e){case"reset":this.$EventBus.$emit("model",{action:e});break;case"toolSideBarVisibility":this.$store.commit("changeToolSideBar",{visible:!this.$store.state.componentVisibility.toolSideBar})}}}},me,!1,function(e){i("kCSB")},"data-v-01d634e9",null).exports,he={name:"SideBar",components:{VueDraggableResize:K.a},data:function(){return{maxHeight:20,activeTabName:"first"}},mounted:function(){var e=this;this.maxHeight=2*window.innerHeight/3,window.addEventListener("resize",function(t){e.maxHeight=2*window.innerHeight/3},!1)},methods:{close:function(){this.$store.commit("changeToolSideBar",{visible:!1})},handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},showParamPanel:function(){this.$store.commit("changeParameterPanel",{visible:!0})}}},fe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("VueDraggableResize",{attrs:{w:320,x:20,y:80,isResizable:!1,"handle-info":{size:0,offset:0,switch:!0}}},[i("el-container",{staticClass:"side-bar"},[i("el-header",{attrs:{height:"30px"}},[i("el-row",[i("el-col",{attrs:{span:22,offset:1}},[e._v("工具箱")]),e._v(" "),i("el-col",{attrs:{span:1}},[i("el-link",{attrs:{underline:!1,type:"danger",icon:"el-icon-close"},on:{click:e.close}})],1)],1)],1),e._v(" "),i("el-main",[i("el-tabs",{staticStyle:{margin:"0 10px"},attrs:{"tab-position":"left",stretch:""},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[i("el-tab-pane",{attrs:{label:"创建",name:"first"}},[i("el-menu",{staticStyle:{"text-align":"left",overflow:"auto"},style:{height:e.maxHeight+"px"},attrs:{"default-active":"1","text-color":"#fff","background-color":"#545c64","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},[i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-location"}),e._v(" "),i("span",[e._v("导航一")])]),e._v(" "),i("el-menu-item-group",[i("template",{slot:"title"},[e._v("分组一")]),e._v(" "),i("el-menu-item",{attrs:{index:"1-1"}},[e._v("选项1")]),e._v(" "),i("el-menu-item",{attrs:{index:"1-2"}},[e._v("选项2")])],2),e._v(" "),i("el-menu-item-group",{attrs:{title:"分组2"}},[i("el-menu-item",{attrs:{index:"1-3"}},[e._v("选项3")])],1),e._v(" "),i("el-submenu",{attrs:{index:"1-4"}},[i("template",{slot:"title"},[e._v("选项4")]),e._v(" "),i("el-menu-item",{attrs:{index:"1-4-1"}},[e._v("选项1")])],2)],2),e._v(" "),i("el-menu-item",{attrs:{index:"2"}},[i("i",{staticClass:"el-icon-menu"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航二")])]),e._v(" "),i("el-menu-item",{attrs:{index:"3",disabled:""}},[i("i",{staticClass:"el-icon-document"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航三")])]),e._v(" "),i("el-menu-item",{attrs:{index:"4"}},[i("i",{staticClass:"el-icon-setting"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航四")])])],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"建模",name:"second"}},[i("div",{staticStyle:{overflow:"auto"},style:{height:e.maxHeight+"px"}},[i("el-collapse",{staticStyle:{"background-color":"#545c64"}},e._l(8,function(t){return i("el-collapse-item",{key:t,staticStyle:{"background-color":"#545c64"},attrs:{name:t}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-location"}),e._v(" "),i("span",[e._v("建模工具"+e._s(t))])]),e._v(" "),e._l(3,function(t){return i("el-row",{key:t},e._l(3,function(t){return i("el-col",{key:t,attrs:{span:8}},[i("div",{staticClass:"grid-content bg-purple",on:{click:e.showParamPanel}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"网格工具",placement:"top-start"}},[i("el-avatar",{staticClass:"functional-card",attrs:{shape:"square",size:60,fit:"fill",src:"/static/logo.png"}})],1)],1)])}),1)})],2)}),1)],1)]),e._v(" "),i("el-tab-pane",{attrs:{label:"网格",name:"third"}},[i("div",{staticStyle:{overflow:"auto"},style:{height:e.maxHeight+"px"}},[i("el-collapse",{staticStyle:{"background-color":"#545c64"}},e._l(8,function(t){return i("el-collapse-item",{key:t,staticStyle:{"background-color":"#545c64"},attrs:{name:t}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-location"}),e._v(" "),i("span",[e._v("网格工具"+e._s(t))])]),e._v(" "),e._l(3,function(t){return i("el-row",{key:t},e._l(3,function(t){return i("el-col",{key:t,attrs:{span:8}},[i("div",{staticClass:"grid-content bg-purple",on:{click:e.showParamPanel}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"网格工具",placement:"top-start"}},[i("el-avatar",{staticClass:"functional-card",attrs:{shape:"square",size:60,fit:"fill",src:"/static/logo.png"}})],1)],1)])}),1)})],2)}),1)],1)])],1)],1)],1)],1)},staticRenderFns:[]};var pe=i("VU/8")(he,fe,!1,function(e){i("XIXi")},null,null).exports,ve={name:"ParameterPanel",components:{VueDraggableResize:K.a},data:function(){return{paramForm:{threshold:1,condition:[],type:""}}},methods:{close:function(){this.$store.commit("changeParameterPanel",{visible:!1})}}},ge={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("VueDraggableResize",{attrs:{w:320,x:350,y:80,isResizable:!1,"handle-info":{size:0,offset:0,switch:!0}}},[i("el-container",{staticClass:"parameter-panel"},[i("el-header",{attrs:{height:"30px"}},[i("el-row",[i("el-col",{attrs:{span:22,offset:1}},[e._v("工具1")]),e._v(" "),i("el-col",{attrs:{span:1}},[i("el-link",{attrs:{underline:!1,type:"danger",icon:"el-icon-close"},on:{click:e.close}})],1)],1)],1),e._v(" "),i("el-main",[i("el-form",{ref:"form",staticClass:"param-form",attrs:{model:e.paramForm,"label-width":"80px",size:"mini","label-position":"right"}},[i("el-form-item",{attrs:{label:"阈值"}},[i("el-input",{attrs:{type:"number"},model:{value:e.paramForm.threshold,callback:function(t){e.$set(e.paramForm,"threshold",t)},expression:"paramForm.threshold"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"约束条件"}},[i("el-checkbox-group",{model:{value:e.paramForm.condition,callback:function(t){e.$set(e.paramForm,"condition",t)},expression:"paramForm.condition"}},[i("el-checkbox",{attrs:{label:"约束1",name:"type"}}),e._v(" "),i("el-checkbox",{attrs:{label:"约束2",name:"type"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"模型类型"}},[i("el-radio-group",{model:{value:e.paramForm.type,callback:function(t){e.$set(e.paramForm,"type",t)},expression:"paramForm.type"}},[i("el-radio",{attrs:{label:"四面体"}}),e._v(" "),i("el-radio",{attrs:{label:"六面体"}})],1)],1)],1)],1),e._v(" "),i("el-footer",{attrs:{height:"40px"}},[i("el-row",[i("el-button",{attrs:{type:"info",size:"mini"},on:{click:e.close}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.close}},[e._v("应用")])],1)],1)],1)],1)},staticRenderFns:[]};var _e=i("VU/8")(ve,ge,!1,function(e){i("7gIH")},null,null).exports,be={state:{toolSideBar:!0,parameterPanel:!0},mutations:{changeToolSideBar:function(e,t){e.toolSideBar=t.visible},changeParameterPanel:function(e,t){e.parameterPanel=t.visible}}},ye={tabs:[{name:"IO",label:"IO",functions:["import","connect","export"]},{name:"View",label:"视图",functions:["view1"]},{label:"建模",functions:["modeling1"]},{label:"仿真",functions:["simulation1"]}],functions:{import:{label:"导入",icon:"el-icon-upload",form:[{label:"文件",type:"file",params:{comment:"只能上传stl文件"}}]},connect:{label:"连接",icon:"el-icon-coordinate",form:[{label:"阈值",type:"input",params:{type:"number"}}]},export:{label:"导出",icon:"el-icon-download",form:[{label:"格式",type:"select",params:{default:"format1",options:[["format1","格式1"],["format2","格式2"]]}}]},view1:{label:"视图1",icon:"el-icon-attract",form:[{label:"阈值",type:"input",params:{type:"number"}}]},modeling1:{label:"建模",icon:"el-icon-shopping-bag-1",form:[]},simulation1:{label:"仿真1",icon:"el-icon-s-promotion",form:[{label:"类型",type:"select",params:{default:"type1",options:[["type1","类型1"],["type2","类型2"]]}}]}}},we={name:"FunctionPanel",components:{VueDraggableResize:K.a},data:function(){return{functionList:ye,activeName:"IO"}},methods:{addFunction:function(e){this.$store.commit("addIntoPipeline",{func:e,label:this.functionList.functions[e].label,form:this.functionList.functions[e].form})}}},xe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("VueDraggableResize",{attrs:{w:500,x:20,y:40,resizable:!1}},[i("el-tabs",{staticClass:"function-panel",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.functionList.tabs,function(t){return i("el-tab-pane",{staticClass:"function-panel-list",attrs:{label:t.label,name:t.name}},e._l(t.functions,function(t){return i("el-button",{attrs:{type:"primary",icon:e.functionList.functions[t].icon},on:{click:function(i){return e.addFunction(t)}}},[e._v("\n          "+e._s(e.functionList.functions[t].label)+"\n        ")])}),1)}),1)],1)},staticRenderFns:[]};var Ce=i("VU/8")(we,xe,!1,function(e){i("g7pe")},null,null).exports,ke={name:"Notebook",components:{VueDraggableResize:K.a},data:function(){return{activeNames:[],sizeForm:{name:"",region:"",date1:"",date2:"",threshold:0,delivery:!1,type:[],resource:"",desc:""}}},methods:{close:function(){this.$store.commit("changeToolSideBar",{visible:!1})},removeFromPipeline:function(e){this.$store.commit("removeFromPipeline",{id:e}),this.activeNames=[]}}},Se={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("VueDraggableResize",{attrs:{w:100,x:20,y:200,resizable:!1}},[i("el-container",{staticClass:"notebook",staticStyle:{height:"500px",width:"400px"}},[i("el-header",{attrs:{height:"30px"}},[i("el-row",[i("el-col",{attrs:{span:22,offset:1}},[e._v("Pipeline")]),e._v(" "),i("el-col",{attrs:{span:1}},[i("el-link",{attrs:{underline:!1,type:"danger",icon:"el-icon-close"},on:{click:e.close}})],1)],1)],1),e._v(" "),i("el-main",[i("el-collapse",{staticClass:"notebook-item-list",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.$store.state.notebookPipeline.pipeline,function(t,a){return i("el-collapse-item",{staticClass:"notebook-item",attrs:{title:t.label,name:a}},[i("el-form",{ref:"form",refInFor:!0,attrs:{model:e.sizeForm,"label-width":"80px",size:"mini"}},[e._l(t.form,function(t){return i("el-form-item",{attrs:{label:t.label}},["input"===t.type?i("el-input",{attrs:{type:t.params.type}}):"file"===t.type?i("el-upload",{attrs:{action:"."}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),i("div",{staticStyle:{color:"white"},attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(t.params.comment))])],1):"select"===t.type?i("el-select",{attrs:{value:t.params.default}},e._l(t.params.options,function(e){return i("el-option",{attrs:{label:e[1],value:e[0]}})}),1):e._e()],1)}),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"}},[e._v("应用")]),e._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.removeFromPipeline(a)}}},[e._v("删除")])],1)],2)],1)}),1)],1)],1)],1)},staticRenderFns:[]};var Me={name:"HomePage2",components:{Notebook:i("VU/8")(ke,Se,!1,function(e){i("5Cvn")},null,null).exports,FunctionPanel:Ce,SideBar:pe,HeaderBar:ue,Model:de,ParameterPanel:_e},data:function(){return{}},methods:{}},Pe={render:function(){var e=this.$createElement;return(this._self._c||e)("Model")},staticRenderFns:[]};var $e=i("VU/8")(Me,Pe,!1,function(e){i("eDuh")},"data-v-6d3d2d69",null).exports,ze=(i("yNe8"),i("0uQj")(W),i("qKrd")(W)),Le=i("od15"),Be={name:"ModelTest",components:{VueDraggableResize:K.a},data:function(){return{active_id:null,loading:!1,camera:null,cameraTarget:null,scene:null,renderer:null,axisHelper:null,stats:null,mesh:null,objects:[],dummy:new W.Object3D}},computed:{statsPositionX:function(){return window.innerWidth-300-200-80-50},faceNum:function(){var e=function(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var a=t[i].split("=");if(a[0]===e)return a[1]}return!1}("face");return!1===e?20:e}},mounted:function(){this.init(),this.addTriangles(),this.loadFaces(),this.createLights(),this.animate()},methods:{init:function(){var e=window.innerWidth,t=window.innerHeight,i=document.getElementById("model-area");this.camera=new W.PerspectiveCamera(35,e/t,.01,15e3),this.camera.position.set(3,3,3),this.cameraTarget=new W.Vector3(0,-.25,0),this.scene=new W.Scene,this.scene.background=new W.Color(5396334),this.renderer=new W.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t),this.renderer.outputEncoding=W.sRGBEncoding,this.renderer.shadowMap.enabled=!0,i.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1),new ze(this.camera,this.renderer.domElement).addEventListener("change",this.render),this.axisHelper=new W.AxisHelper(.15),this.scene.add(this.axisHelper),this.stats=new Le,this.stats.domElement.style.position="absolute",console.log(i),document.getElementById("model-stats").appendChild(this.stats.domElement)},loadFaces:function(){console.log("面网格数量: ",this.faceNum)},createLights:function(){this.scene.add(new W.AmbientLight(6316128)),this.addShadowedLight(-1,1,1,15658734,1),this.addShadowedLight(-.5,.5,-1,13421772,.5),this.addShadowedLight(1,.5,0,13421772,1)},addShadowedLight:function(e,t,i,a,n){var o=new W.DirectionalLight(a,n);o.position.set(e,t,i),this.scene.add(o),o.castShadow=!0;o.shadow.camera.left=-1,o.shadow.camera.right=1,o.shadow.camera.top=1,o.shadow.camera.bottom=-1,o.shadow.camera.near=1,o.shadow.camera.far=4,o.shadow.bias=-.002},render:function(){this.camera.lookAt(this.cameraTarget),this.camera.updateMatrixWorld();var e=this.camera.localToWorld(new W.Vector3(.45*this.camera.aspect,-.4,-2));this.axisHelper.position.copy(e),this.renderer.render(this.scene,this.camera)},onWindowResize:function(){var e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},addTriangles:function(){var e=this.faceNum;function t(){return new W.Vector3(Math.random(),Math.random(),Math.random())}for(var i=0;i<e;++i){var a=new W.Geometry;a.vertices.push(t()),a.vertices.push(t()),a.vertices.push(t());var n=new W.Face3(0,1,2);n.vertexColors.push(new W.Color(16755200),new W.Color(16755200),new W.Color(43520)),console.log(n),a.faces.push(n),a.computeFaceNormals(),a=(new W.BufferGeometry).fromGeometry(a);var o=new W.MeshPhongMaterial({metalness:1,roughness:.6,vertexColors:W.VertexColors}),s=new W.Mesh(a,o);s.position.set(Math.random(),Math.random(),Math.random()),s.rotation.set(Math.random(),Math.random(),Math.random()),s.scale.set(Math.random(),Math.random(),Math.random()),s.castShadow=!0,s.receiveShadow=!0,this.scene.add(s),this.objects.push(s)}this.$message({message:e+" faces",type:"success"})}}},Ee={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],attrs:{id:"model-area","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("VueDraggableResize",{attrs:{id:"model-stats",w:80,h:48,y:80,x:this.statsPositionX,"handle-info":{size:0,offset:0,switch:!0},isResizable:!1}}),this._v(" "),t("VueDraggableResize",{attrs:{w:150,h:48,y:80,x:20,"handle-info":{size:0,offset:0,switch:!0},isResizable:!1}},[t("strong",{staticStyle:{color:"white"}},[this._v("面网格数量："+this._s(this.faceNum))])])],1)},staticRenderFns:[]};var Fe=i("VU/8")(Be,Ee,!1,function(e){i("sYqU")},"data-v-6009b3ee",null).exports;a.default.use(l.a),a.default.use("vue-draggable-resizable",K.a);var Re=l.a.prototype.push;l.a.prototype.push=function(e){return Re.call(this,e).catch(function(e){return e})};var He=new l.a({routes:[{path:"/home2",name:"Home",component:$e},{path:"/test",name:"FaceTest",component:Fe},{path:"/",name:"Home",component:ie},{path:"/:id(\\d+)",name:"Detail",component:ie}]}),Ie=i("NYxO"),Te={state:{pipeline:[]},mutations:{addIntoPipeline:function(e,t){e.pipeline.push({func:t.func,label:t.label,form:t.form})},removeFromPipeline:function(e,t){var i=t.id;e.pipeline.remove(i)}}},Ue=i("8+8L");a.default.use(Ue.a),a.default.use(Ie.a);var Ve=new Ie.a.Store({modules:{componentVisibility:be,notebookPipeline:Te}}),Oe=i("Z4N3"),Ge=i.n(Oe),Ne=function(e){return"/models/"+e},De={BASE_URL:"/",MODELS_LIST_URL:"/models/",MODEL_ITEM_URL:Ne,MODEL_CONFIG_URL:function(e){return Ne(e)+"/config"},MODEL_TASK_URL:function(e){return Ne(e)+"/task"}};a.default.config.productionTip=!1,a.default.use(r.a),a.default.prototype.$EventBus=new a.default,a.default.use(Ge.a),Array.prototype.remove=function(e,t){var i=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,i)},Array.prototype.removeElement=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)},Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},a.default.prototype.GLOBAL=De,ne.a.defaults.headers.common["Access-Control-Allow-Origin"]="*",a.default.prototype.axios=ne.a,new a.default({el:"#app",router:He,store:Ve,components:{App:o},template:"<App/>"})},PG9j:function(e,t){},Ttho:function(e,t){},WTfM:function(e,t){},XIXi:function(e,t){},XewL:function(e,t){},Y4Wn:function(e,t){},YBGF:function(e,t){},ZqaU:function(e,t){},eDuh:function(e,t){},g7pe:function(e,t){},hOEG:function(e,t){},i5se:function(e,t){},irT2:function(e,t){},iv08:function(e,t){},kCSB:function(e,t){},lLnQ:function(e,t){},lXbF:function(e,t){},sYqU:function(e,t){},tvR6:function(e,t){},vvkt:function(e,t){},yNe8:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a8ca842fa0dd5a12ba07.js.map