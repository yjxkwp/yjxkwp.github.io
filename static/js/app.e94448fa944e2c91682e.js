webpackJsonp([1],{"9f3C":function(e,t){},CIL3:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},n,!1,function(e){a("CIL3")},null,null).exports,o=a("zL8q"),r=a.n(o),l=(a("tvR6"),a("/ocq")),c=(a("5gbj"),a("Ml+6")),d=a("bz7y"),m=a.n(d),u=a("0uQj")(c),h=a("qKrd")(c),p=a("od15"),v={name:"Model",components:{VueDraggableResize:m.a},data:function(){return{camera:null,cameraTarget:null,scene:null,renderer:null,axisHelper:null,stats:null}},computed:{statsPositionX:function(){return window.innerWidth-80-20}},mounted:function(){this.init(),this.loadStlObject(),this.createLights(),this.animate(),this.actionInit()},methods:{init:function(){var e=document.getElementById("model-area");this.camera=new c.PerspectiveCamera(35,window.innerWidth/(window.innerHeight-60),1,15),this.camera.position.set(3,.15,3),this.cameraTarget=new c.Vector3(0,-.25,0),this.scene=new c.Scene,this.scene.background=new c.Color(5592405),this.scene.fog=new c.Fog(5592405,2,15),this.renderer=new c.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight-60),this.renderer.outputEncoding=c.sRGBEncoding,this.renderer.shadowMap.enabled=!0,e.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1),new h(this.camera,this.renderer.domElement).addEventListener("change",this.render),this.axisHelper=new c.AxisHelper(.15),this.scene.add(this.axisHelper),this.stats=new p,this.stats.domElement.style.position="absolute",console.log(e),document.getElementById("model-stats").appendChild(this.stats.domElement)},make_center:function(e){for(var t=e.attributes.position.itemSize,a=e.attributes.position.count,i=Array(t).fill(0),n=0;n<a;++n)for(var s=0;s<t;++s)i[s]+=e.attributes.position.array[n*t+s];for(var o=0;o<t;++o)i[o]/=a;e.computeBoundingBox();for(var r=e.boundingBox.max.clone().sub(e.boundingBox.min.clone()),l=Math.max.apply(Math,[r.x,r.y,r.z]),c=0;c<a;++c)for(var d=0;d<t;++d)e.attributes.position.array[c*t+d]-=i[d],e.attributes.position.array[c*t+d]/=l;e.computeBoundingBox()},loadStlObject:function(){var e=this;(new u).load("./static/models/insole.stl",function(t){e.make_center(t);var a=new c.MeshPhongMaterial({color:7829367,specular:0,shininess:20}),i=new c.Mesh(t,a);i.position.set(0,0,0),i.rotation.set(0,-Math.PI/2,0),i.scale.set(2,2,2),i.castShadow=!0,i.receiveShadow=!0,console.log(i),e.scene.add(i)})},createLights:function(){this.scene.add(new c.AmbientLight(6316128)),this.addShadowedLight(-1,1,1,15658734,1),this.addShadowedLight(-.5,.5,-1,13421772,.5),this.addShadowedLight(1,.5,0,13421772,1)},addShadowedLight:function(e,t,a,i,n){var s=new c.DirectionalLight(i,n);s.position.set(e,t,a),this.scene.add(s),s.castShadow=!0;s.shadow.camera.left=-1,s.shadow.camera.right=1,s.shadow.camera.top=1,s.shadow.camera.bottom=-1,s.shadow.camera.near=1,s.shadow.camera.far=4,s.shadow.bias=-.002},render:function(){this.camera.lookAt(this.cameraTarget),this.camera.updateMatrixWorld();var e=this.camera.localToWorld(new c.Vector3(.45*this.camera.aspect,-.4,-2));this.axisHelper.position.copy(e),this.renderer.render(this.scene,this.camera)},onWindowResize:function(){this.camera.aspect=window.innerWidth/(window.innerHeight-60),this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight-60)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},actionInit:function(){var e=this;this.$EventBus.$on("model",function(t){switch(t.action){case"reset":e.camera.position.set(3,.15,3),e.cameraTarget=new c.Vector3(0,-.25,0),e.$message({message:"复位成功",type:"success"});break;default:e.$message({message:"收到未定义的事件: "+t.action,type:"warning"})}})}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"model-area"}},[t("VueDraggableResize",{attrs:{id:"model-stats",w:80,h:48,y:80,x:this.statsPositionX,"handle-info":{size:0,offset:0,switch:!0},isResizable:!1}})],1)},staticRenderFns:[]};var _=a("VU/8")(v,f,!1,function(e){a("rA9o")},"data-v-b8d1e84e",null).exports,g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#409EFF"},on:{select:e.handleSelect}},[a("el-menu-item",[a("el-avatar",{attrs:{size:"large",src:e.logoUrl}})],1),e._v(" "),a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[e._v("文件")]),e._v(" "),a("el-menu-item",{attrs:{index:"load"}},[e._v("加载")]),e._v(" "),a("el-menu-item",{attrs:{index:"save"}},[e._v("保存")]),e._v(" "),a("el-menu-item",{attrs:{index:"exit"}},[e._v("退出")])],2),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[e._v("编辑")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-1"}},[e._v("选项1")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-2"}},[e._v("选项2")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-3"}},[e._v("选项3")])],2),e._v(" "),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[e._v("视图")]),e._v(" "),a("el-menu-item",{attrs:{index:"reset"}},[e._v("复位")]),e._v(" "),a("el-menu-item",{attrs:{index:"3-2"}},[e._v("选项2")]),e._v(" "),a("el-menu-item",{attrs:{index:"3-3"}},[e._v("选项3")])],2),e._v(" "),a("el-submenu",{attrs:{index:"4"}},[a("template",{slot:"title"},[e._v("窗口")]),e._v(" "),a("el-menu-item",{attrs:{index:"toolSideBarVisibility"}},[e._v("\n            "+e._s(e.$store.state.componentVisibility.toolSideBar?"隐藏":"显示")+"侧边工具箱\n        ")]),e._v(" "),a("el-menu-item",{attrs:{index:"4-2"}},[e._v("选项2")]),e._v(" "),a("el-menu-item",{attrs:{index:"4-3"}},[e._v("选项3")])],2)],1)},staticRenderFns:[]};var b=a("VU/8")({name:"HeaderBar",data:function(){return{logoUrl:"static/logo.png",activeIndex:"1"}},methods:{handleSelect:function(e,t){switch(e){case"reset":this.$EventBus.$emit("model",{action:e});break;case"toolSideBarVisibility":this.$store.commit("changeToolSideBar",{visible:!this.$store.state.componentVisibility.toolSideBar})}}}},g,!1,function(e){a("9f3C")},"data-v-418a3e7a",null).exports,w={name:"SideBar",components:{VueDraggableResize:m.a},data:function(){return{maxHeight:20,activeTabName:"first"}},mounted:function(){var e=this;this.maxHeight=2*window.innerHeight/3,window.addEventListener("resize",function(t){e.maxHeight=2*window.innerHeight/3},!1)},methods:{close:function(){this.$store.commit("changeToolSideBar",{visible:!1})},handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},showParamPanel:function(){this.$store.commit("changeParameterPanel",{visible:!0})}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("VueDraggableResize",{attrs:{w:320,x:20,y:80,isResizable:!1,"handle-info":{size:0,offset:0,switch:!0}}},[a("el-container",{staticClass:"side-bar"},[a("el-header",{attrs:{height:"30px"}},[a("el-row",[a("el-col",{attrs:{span:22,offset:1}},[e._v("工具箱")]),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-link",{attrs:{underline:!1,type:"danger",icon:"el-icon-close"},on:{click:e.close}})],1)],1)],1),e._v(" "),a("el-main",[a("el-tabs",{staticStyle:{margin:"0 10px"},attrs:{"tab-position":"left",stretch:""},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"创建",name:"first"}},[a("el-menu",{staticStyle:{"text-align":"left",overflow:"auto"},style:{height:e.maxHeight+"px"},attrs:{"default-active":"1","text-color":"#fff","background-color":"#545c64","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",[e._v("导航一")])]),e._v(" "),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("分组一")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-1"}},[e._v("选项1")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-2"}},[e._v("选项2")])],2),e._v(" "),a("el-menu-item-group",{attrs:{title:"分组2"}},[a("el-menu-item",{attrs:{index:"1-3"}},[e._v("选项3")])],1),e._v(" "),a("el-submenu",{attrs:{index:"1-4"}},[a("template",{slot:"title"},[e._v("选项4")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-4-1"}},[e._v("选项1")])],2)],2),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航二")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3",disabled:""}},[a("i",{staticClass:"el-icon-document"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航三")])]),e._v(" "),a("el-menu-item",{attrs:{index:"4"}},[a("i",{staticClass:"el-icon-setting"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航四")])])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"建模",name:"second"}},[a("div",{staticStyle:{overflow:"auto"},style:{height:e.maxHeight+"px"}},[a("el-collapse",{staticStyle:{"background-color":"#545c64"}},e._l(8,function(t){return a("el-collapse-item",{key:t,staticStyle:{"background-color":"#545c64"},attrs:{name:t}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",[e._v("建模工具"+e._s(t))])]),e._v(" "),e._l(3,function(t){return a("el-row",{key:t},e._l(3,function(t){return a("el-col",{key:t,attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple",on:{click:e.showParamPanel}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"网格工具",placement:"top-start"}},[a("el-avatar",{staticClass:"functional-card",attrs:{shape:"square",size:60,fit:"fill",src:"/static/logo.png"}})],1)],1)])}),1)})],2)}),1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"网格",name:"third"}},[a("div",{staticStyle:{overflow:"auto"},style:{height:e.maxHeight+"px"}},[a("el-collapse",{staticStyle:{"background-color":"#545c64"}},e._l(8,function(t){return a("el-collapse-item",{key:t,staticStyle:{"background-color":"#545c64"},attrs:{name:t}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",[e._v("网格工具"+e._s(t))])]),e._v(" "),e._l(3,function(t){return a("el-row",{key:t},e._l(3,function(t){return a("el-col",{key:t,attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple",on:{click:e.showParamPanel}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"网格工具",placement:"top-start"}},[a("el-avatar",{staticClass:"functional-card",attrs:{shape:"square",size:60,fit:"fill",src:"/static/logo.png"}})],1)],1)])}),1)})],2)}),1)],1)])],1)],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(w,x,!1,function(e){a("m4a/")},null,null).exports,S={name:"ParameterPanel",components:{VueDraggableResize:m.a},data:function(){return{paramForm:{threshold:1,condition:[],type:""}}},methods:{close:function(){this.$store.commit("changeParameterPanel",{visible:!1})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("VueDraggableResize",{attrs:{w:320,x:350,y:80,isResizable:!1,"handle-info":{size:0,offset:0,switch:!0}}},[a("el-container",{staticClass:"parameter-panel"},[a("el-header",{attrs:{height:"30px"}},[a("el-row",[a("el-col",{attrs:{span:22,offset:1}},[e._v("工具1")]),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-link",{attrs:{underline:!1,type:"danger",icon:"el-icon-close"},on:{click:e.close}})],1)],1)],1),e._v(" "),a("el-main",[a("el-form",{ref:"form",staticClass:"param-form",attrs:{model:e.paramForm,"label-width":"80px",size:"mini","label-position":"right"}},[a("el-form-item",{attrs:{label:"阈值"}},[a("el-input",{attrs:{type:"number"},model:{value:e.paramForm.threshold,callback:function(t){e.$set(e.paramForm,"threshold",t)},expression:"paramForm.threshold"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"约束条件"}},[a("el-checkbox-group",{model:{value:e.paramForm.condition,callback:function(t){e.$set(e.paramForm,"condition",t)},expression:"paramForm.condition"}},[a("el-checkbox",{attrs:{label:"约束1",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"约束2",name:"type"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"模型类型"}},[a("el-radio-group",{model:{value:e.paramForm.type,callback:function(t){e.$set(e.paramForm,"type",t)},expression:"paramForm.type"}},[a("el-radio",{attrs:{label:"四面体"}}),e._v(" "),a("el-radio",{attrs:{label:"六面体"}})],1)],1)],1)],1),e._v(" "),a("el-footer",{attrs:{height:"40px"}},[a("el-row",[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:e.close}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.close}},[e._v("应用")])],1)],1)],1)],1)},staticRenderFns:[]};var z={state:{toolSideBar:!0,parameterPanel:!0},mutations:{changeToolSideBar:function(e,t){e.toolSideBar=t.visible},changeParameterPanel:function(e,t){e.parameterPanel=t.visible}}},P={name:"HomePage",components:{SideBar:y,HeaderBar:b,Model:_,ParameterPanel:a("VU/8")(S,k,!1,function(e){a("xzqd")},null,null).exports},data:function(){return{}},methods:{}},B={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",[t("HeaderBar")],1),this._v(" "),t("el-main",[t("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.componentVisibility.toolSideBar,expression:"$store.state.componentVisibility.toolSideBar"}]},[t("SideBar"),this._v(" "),this.$store.state.componentVisibility.parameterPanel?t("ParameterPanel"):this._e()],1),this._v(" "),t("Model")],1)],1)},staticRenderFns:[]};var C=a("VU/8")(P,B,!1,function(e){a("dTqd")},"data-v-3ff72c6c",null).exports;i.default.use(l.a),i.default.use("vue-draggable-resizable",m.a);var $=new l.a({routes:[{path:"/",name:"Home",component:C}]}),H=a("NYxO");i.default.use(H.a);var R=new H.a.Store({modules:{componentVisibility:z}});i.default.config.productionTip=!1,i.default.use(r.a),i.default.prototype.$EventBus=new i.default,new i.default({el:"#app",router:$,store:R,components:{App:s},template:"<App/>"})},dTqd:function(e,t){},"m4a/":function(e,t){},rA9o:function(e,t){},tvR6:function(e,t){},xzqd:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e94448fa944e2c91682e.js.map